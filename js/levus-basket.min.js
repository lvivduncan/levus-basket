// 5-06-2020
{const e=document.querySelector("#basket-quantity"),t=document.querySelector("#basket-sum"),a=document.querySelector("#basket-goods");function addGoods(){const e={name:this.dataset.name,size:this.dataset.size,price:this.dataset.price};if(null===localStorage.getItem("basket")){const t=[];t.push(e),localStorage.setItem("basket",JSON.stringify(t)),viewQuantity(),viewSum(),viewSelected()}else{const t=JSON.parse(localStorage.getItem("basket"));t.push(e),localStorage.setItem("basket",JSON.stringify(t)),viewQuantity(),viewSum(),viewSelected()}}function viewQuantity(){null===localStorage.getItem("basket")?e.innerHTML=0:e.innerHTML=JSON.parse(localStorage.getItem("basket")).length}function viewSum(){null===localStorage.getItem("basket")?t.innerHTML=0:t.innerHTML=JSON.parse(localStorage.getItem("basket")).map(e=>e.price).reduce((e,t)=>e+ +t,0)}function getOrder(){}function clearStorage(){localStorage.clear("basket"),viewSum(),viewQuantity(),viewSelected()}function viewSelected(){if(null===localStorage.getItem("basket"))a.innerHTML="";else{const e=JSON.parse(localStorage.getItem("basket"));1===JSON.parse(localStorage.getItem("basket")).length?a.innerHTML=`<p><i></i> ${e[0].name} - ${e[0].size} - ${e[0].price}</p>`:a.innerHTML=e.reduce((e,t,a)=>e+`<p><i data-id="${a}"></i> ${t.name} - ${t.size} - ${t.price}</p>`,"")}}function removeGoods(e){if("I"===e.target.tagName){const t=e.target.dataset.id,a=JSON.parse(localStorage.getItem("basket"));a.splice(t,1),localStorage.setItem("basket",JSON.stringify(a)),viewSum(),viewQuantity(),viewSelected()}}document.querySelectorAll("button").forEach(e=>e.addEventListener("click",addGoods)),document.querySelector("#basket-order").addEventListener("click",getOrder),document.querySelector("#basket-clear").addEventListener("click",clearStorage),a.addEventListener("click",e=>removeGoods(e)),viewSum(),viewQuantity(),viewSelected()}