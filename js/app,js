```js
// натискання кнопки "в кошик" створює/перезаписує об’єкт у локалСторедж і виводе з ЛС дані в кошик
// видалення позиції з кошику має перезаписувати об’єкт у ЛС і виводити у кошику
const items = document.querySelectorAll('article.item'); // отримуємо усі карточки товарів

// опрацьовуємо нодЛіст
items.forEach((item, i) => {

	// отримуємо кнопку замовлення товару
	let button = items[i].querySelector('.button');

	// отримуємо додаткові опції товару
	let select = items[i].querySelector('select');

	// якщо опції є
	if(select != null){
		button.dataset.option = select.value;

		// отримуємо вибрану опцію і записуємо в data-option="" 
		select.onchange = () => {
			button.dataset.option = select.value;
		}
	} else {
		button.dataset.option = 0;
	}

	// клікання на кнопці замовлення товару
	button.onclick = () => {
		
		// якщо у локалСтореджі уже є дані
		if(localStorage.getItem('basket') != null){
			let localContent = localStorage.getItem('basket');

			localStorage.setItem('basket', localContent + '|' + JSON.stringify({
				name: button.dataset.name, 
				price: button.dataset.price, 
				option: button.dataset.option,
				img: button.dataset.img
			}));
		} else {
			localStorage.setItem('basket', JSON.stringify({
				name: button.dataset.name, 
				price: button.dataset.price, 
				option: button.dataset.option,
				img: button.dataset.img
			}));
		}

		// оновлюємо кошик
		getBasket();

	}
});

// працюємо з кошиком, виводимо в ньому дані про замовлені товари 
const goods = document.querySelector('.goods'), // сюди виводимо товари з локалСтореджа
	  amount = document.querySelectorAll('.amount'), // загальна вартість товарів у локалСтореджі
	  quantity = document.querySelector('.quantity'); // кількість товарів у локалСтореджі

const getBasket = () => {

	let basket, // опрацьовуємо локалСторедж	
		price = 0, // тимчасова змінна, в яку кладемо загальну вартість товарів
		txt = '',
		img = '<img src="images/trash.gif" alt=""> ';

	// якщо замовлення є
	if(localStorage.getItem('basket') != null){

		// отримуємо стрінг, розбираємо на частини
		basket = localStorage.getItem('basket').split('|');

		// опрацьовуємо стрінг
		basket.forEach((item, i) => basket[i] = JSON.parse(basket[i]));	

		// загальна сума замовлених товарів
		price = basket.reduce((total, el) => total + +el.price, 0);
		
		// товари стовпчиком
		basket.forEach((item) => txt += '<li>' + img + item.name + '</li>');	

		// записуємо кількість товарів
		quantity.textContent = basket.length;

		// щоб не юзати зайвий раз цикл або метод форІч, вказую 2 класи явно:
		amount[0].textContent = price;
		amount[1].textContent = price;

		// незадокументована властивість але прекрасно працює
		goods.innerHTML = '<ul class="goods-list">' + txt + '</ul><hr />';
	}

}

getBasket();
	
const goodsList = document.querySelectorAll('.goods-list > li'); // отримуємо товари з кошика

if(goodsList != null){

	if(localStorage.getItem('basket') != null){

		// отримуємо стрінг, розбираємо на частини
		let basket = localStorage.getItem('basket').split('|');	

		// опрацьовуємо стрінг
		basket.forEach((item, i) => basket[i] = JSON.parse(basket[i]));	

		goodsList.forEach((item, i) => {
			item.childNodes[0].onclick = () => {

				let txt = '';

				basket.splice(item.childNodes[i], 1); // видаляємо елемент

				if(basket.length > 1){

					for(let i in basket){
						basket[i] = JSON.stringify(basket[i]);
					}

					txt = basket.join('|');

					localStorage.setItem('basket', txt);

				} else if(basket.length == 1) {

					txt = basket[0];

					localStorage.setItem('basket', JSON.stringify(txt));
					
				} else {

					localStorage.clear();

				}

				getBasket();

			}

		});			

	}

}

const delGoods = document.querySelector('#del-goods');

delGoods.onclick = (event) => {
	event.preventDefault();
	localStorage.clear();
	// return false;
}

